<html>
  {{template "head"}}
  <body>
    {{template "header" .}}
    <!-- need to add a status bar -->
    <p>
      <a href="/index.html">Back to Search</a>
    </p>
    {{if .DecodedCookie.HasCapabilityIniviteUsers}}
      {{with .DecodedCookie}}
        <p>Welcome {{.DisplayName}}  <button onclick="clearSessionCookie();">Sign out</button></p>
      {{end}} {{/* with .DecodedCookie */}}
      <p>Return to <a href="/usermgt/listusers.html">user list</a></p>
      <!-- query value has to be in the field -->
      {{with .Results}}
        {{if .Useradded}}
          <p>{{.Username}} successfully added.</p>
        {{else if .Usernotadded}}
          {{.ReasonForFailure}}
        {{else}}  {{/* .Useradded */}}
          <form action="/usermgt/adduser.html" method="post">
            <div class="onefield">
	      <label for="username">Username:</label>
              <input id="username" type="text" name="username" size="10" ./>
            </div>
            <div class="onefield">
	      <label for="displayname">Display name:</label>
	      <input id="displayname" type="text" name="displayname" size="40" ./>
            </div>
            <div class="onefield">
	      <label for="newpassword">Starter password</label>
	      <input id="newpassword" type="password" name="newpassword" size="40" ./>
            </div>
            <div class="onefield">
	      <label for="newpasswordagain">Starter password again</label>
                <input id="newpasswordagain" type="password" name="newpasswordagain" size="40" ./>
            </div>
            <div class="picker">
	      <label for="role">Role for user</label>
	      <select name="role" id="role" id="role">
		<option value="admin">Administrator</option> 
		<option value="volunteer" >Volunteer</option>
	      </select>
            </div>
            <div class="button">
              <input type="submit" value="Add user" />
            </div>
          </form>
        {{end}} {{/* if .Useradded */}}
      {{end}} {{/* with .Results  */}}
    {{else}} {{/* if .DecodedCookie.HasCapabilityIniviteUsers */}}
      <p>You aren't signed with the right to add users. <a href="/login.html">Sign-in</a> as an administrative user.</p>
    {{end}} {{/* if .DecodedCookie.HasCapabilityViewUsers */}}
    {{template "footer"}}
  </body>
</html>
